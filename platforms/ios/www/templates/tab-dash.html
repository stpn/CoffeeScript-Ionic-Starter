<ion-view view-title="Dash">
    <ion-top-menu  id="ionTopMenu" ng-click="cancelActiveBuilding($event)">
        <ion-scroll style="width:100%;height:100%" >
            <div class="list" id="building_menu_wrap" ng-show="isComparison() == false" >
                <ng-include src="templatePath"></ng-include>
            </div>


            <div id="comparison_wrap" ng-show="isComparison() == true">
                <ng-include src="compTemplate" ></ng-include>
            </div>


        </ion-scroll>


        <div class="buttons">
            <div ng-click="toggleTopMenu()" class="empty" id="menuBtn">
                <div class="bevel">
                    <div ng-model=activeBuilding id ="select_bld">{{activeBuilding.tabName.toUpperCase() || "SELECT BUILDING"}}</div>
                </div>
            </div>
        </div>
    </ion-top-menu>


    <ion-content id="main_menu">
        <ion-list>
            <div ng-repeat='factory in factories' class="accordion_container">
                <ion-item class="item-stable clicker" ng-click="toggleGroup(factory)" ng-class="{active: isGroupShown(factory)}">
                    <i class="icon" ng-class="isGroupShown(factory) ? 'ion-minus' : 'ion-plus'"></i> &nbsp; {{factory[0] | uppercase }}
                </ion-item>
<div class="row responsive-md item-accordion gallery" ng-show="isGroupShown(factory)" ng-repeat="model in factory[1] | buildingFilter: activeBuilding.getName()" ng-if="$index % 4 === 0">
    <ion-item class="col cust_col" ng-if="$index < factory[1].length && activeBuilding.isActive( factory[1][$index].building_name)" href="#/tab/{{factory[0].toLowerCase()}}/{{factory[1][$index].id}}" on-hold="showCompareMenu()">
        <img ng-src="{{factory[1][$index].image}}" width="100%" height="100%" />
        <div class="image_name" ng-if="factory[1][$index].name !== undefined">
            {{factory[1][$index].name}}
        </div>
    </ion-item>
    <ion-item class="col cust_col" ng-if="$index + 1 < factory[1].length && activeBuilding.isActive( factory[1][$index + 1].building_name)" href="#/tab/{{factory[0].toLowerCase()}}/{{factory[1][$index + 1].id}}" on-hold="showCompareMenu()">
        <img ng-src="{{factory[1][$index + 1].image}}" width="100%" />
        <div class="image_name" ng-if="factory[1][$index + 1].name !== undefined">
            {{factory[1][$index + 1].name}}
        </div>
    </ion-item>
    <ion-item class="col cust_col" ng-if="$index + 2 < factory[1].length && activeBuilding.isActive( factory[1][$index + 2].building_name)" href="#/tab/{{factory[0].toLowerCase()}}/{{factory[1][$index + 2].id}}" on-hold="showCompareMenu()">
        <img ng-src="{{factory[1][$index + 2].image}}" width="100%" />
        <div class="image_name" ng-if="factory[1][$index + 2].name !== undefined">
            {{factory[1][$index + 2].name}}
        </div>
    </ion-item>
    <ion-item class="col cust_col" ng-if="$index + 3 < factory[1].length && activeBuilding.isActive( factory[1][$index + 3].building_name)" href="#/tab/{{factory[0].toLowerCase()}}/{{factory[1][$index + 3].id}}" on-hold="showCompareMenu()">
        <img ng-src="{{factory[1][$index + 3].image}}" width="100%" />
        <div class="image_name" ng-if="factory[1][$index + 3].name !== undefined">
            {{factory[1][$index + 3].name}}
        </div>
    </ion-item>
</div>
</div>
<!-- <div ng-repeat='(nam, factory) in factories' class="accordion_container">
    <ion-item class="item-stable" ng-click="toggleGroup(factory)" ng-class="{active: isGroupShown(factory)}">
        <i class="icon" ng-class="isGroupShown(factory) ? 'ion-minus' : 'ion-plus'"></i> &nbsp; {{nam}}
    </ion-item>
    <div class="row responsive-md item-accordion gallery" ng-show="isGroupShown(factory)" ng-repeat="model in factory | buildingFilter: activeBuilding.getName()" ng-if="$index % 4 === 0">
        <ion-item class="col cust_col" ng-if="$index < factory.length && activeBuilding.isActive( factory[$index].building_name)" href="#/tab/{{nam.toLowerCase()}}/{{model.id}}" on-hold="showCompareMenu()">
            <img ng-src="{{factory[$index].image}}" width="100%" height="100%" />
            <div class="image_name" ng-if="factory[$index].name !== undefined">
                {{factory[$index].name}}
            </div>
        </ion-item>
        <ion-item class="col cust_col" ng-if="$index + 1 < factory.length && activeBuilding.isActive( factory[$index + 1].building_name)" on-hold="showCompareMenu()">
            <img ng-src="{{factory[$index + 1].image}}" width="100%" />
            <div class="image_name" ng-if="factory[$index].name !== undefined">
                {{factory[$index].name}}
            </div>
        </ion-item>
        <ion-item class="col cust_col" ng-if="$index + 2 < factory.length && activeBuilding.isActive( factory[$index + 2].building_name)" on-hold="showCompareMenu()">
            <img ng-src="{{factory[$index + 2].image}}" width="100%" />
            <div class="image_name" ng-if="factory[$index].name !== undefined">
                {{factory[$index].name}}
            </div>
        </ion-item>
        <ion-item class="col cust_col" ng-if="$index + 3 < factory.length && activeBuilding.isActive( factory[$index + 3].building_name)" on-hold="showCompareMenu()">
            <img ng-src="{{factory[$index + 3].image}}" width="100%" />
            <div class="image_name" ng-if="factory[$index].name !== undefined">
                {{factory[$index].name}}
            </div>
        </ion-item>
    </div>
</div>
 -->
        </ion-list>
    </ion-content>
</ion-view>
